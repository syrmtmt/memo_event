# JPAAWG 3rd General Meeting

## 概要

* メールセキュリティに関するオープンミーティング。
* <https://meetings.jpaawg.org/>
* 2days通して1セッションしか聞けんかったorz

---

## DMARC レポート送信 milter 紹介と最近の傾向

* by 加瀬 正樹氏（株式会社TwoFive）
* （入室ちょっと遅れた）
* 「DMARCに対応する」とは？
    * DMARCレコードを設定する
    * DMARCレポートに対応する
    * DMARCでなりすましを防ぐ
        * 自社ドメインのポリシーを厳しくする by ドメイン管理者
        * ポリシーに従って、DMARCfailで届かなくする by 受信サーバ管理者
    * 注「DKIM未対応だからDMARC対応できない」　→間違ってます
        * SPFかDKIMどっちかやってればDMARCできます
        * 「DKIM検証できないからDMARC対応できない」　→携帯キャリア宛のメールは確かにDKIM検証やってないのでできないね。
* 総務省のDMARCレポートについての見解
    * ISPがDMARC処理するときについての法解釈
        * RUFレポートについては、「本文と件名を除去（マスキング）すれば失敗レポートを送っても法的に問題ない」という解釈
        * フィルタリングをするときは「ユーザの同意が必要」という解釈
* DMARC集計レポートの生成milterについて
    * OpenDMARCについて
        * MTAに実装
        * 認証結果をテキストファイルに起こす→定期的にmySQLに放り込む→スクリプトでレポートとして送信する
        * デメリット　：メール1通ずつ処理するので、XMLが細かくなる／DKIM selector情報がレポートに含まれない
    * DMARC/25 Reporterについて
        * 「ぼくらが開発しました！」
        * MTAに実装
        * 認証結果をぼくら管理のクラウドDBに起こす→レポートとして送信
        * GUIで届いたメールの概況・XMLレポートを見ることもできます　：SPF,DKIM alignedドメイン一覧とか
        * 「無償で提供してます」えっマジでか
* 集計レポートtips
    * アメリカのドメインからのDMARCレポートが多いですね、次点はドイツ。
    * 全体の通数で言ってもアメリカからのレポート数が多い。
    * RFCまわりの動きについて　：RFC7489を以下sub-WGに分けて検討しているとのこと。
        * Base spec　：ARC関連のアップデートもあるかもね
        * Aggregate report　：以下の点について改善が検討されている
            * ARCの結果を書くところが現状ない　→local_policyのcommentに自由記述な感じで書かれているので、フィールド決める？
            * DKIM selectorの記載がない場合がある　→必須にする？
            * k=ed25519-sha256にする？
        * Failure report
* QA
    * Q. 日本国内では必須のマスキング、OpenDMARCとかでは対応してるの？
        * A. どっちもRUAのレポートなのでそもそもマスキングいらないっす
    * Q. DMARCのレポートを発行するだけならユーザ同意は不要ってこと？
        * A. 法的整備の対象になってるのがそもそもRUFレポートのみ。同意が得られるなら得たほうが安全ではある。